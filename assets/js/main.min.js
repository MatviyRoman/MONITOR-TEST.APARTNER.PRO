
(function(){var a=typeof module!=="undefined"&&module.exports;var b=typeof Element!=="undefined"&&"ALLOW_KEYBOARD_INPUT" in Element;var c=(function(){var k;var j;var e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var h=0;var f=e.length;var g={};for(;h<f;h++){k=e[h];if(k&&k[1] in document){for(h=0,j=k.length;h<j;h++){g[e[0][h]]=k[h]}return g}}return false})();var d={request:function(f){var e=c.requestFullscreen;f=f||document.documentElement;f[e]()},exit:function(){document[c.exitFullscreen]()},toggle:function(e){if(this.isFullscreen){this.exit()}else{this.request(e)}},onchange:function(){},onerror:function(){},raw:c};if(!c){if(a){module.exports=false}else{window.screenfull=false}return}Object.defineProperties(d,{isFullscreen:{get:function(){return !!document[c.fullscreenElement]}},element:{enumerable:true,get:function(){return document[c.fullscreenElement]}},enabled:{enumerable:true,get:function(){return !!document[c.fullscreenEnabled]}}});document.addEventListener(c.fullscreenchange,function(f){d.onchange.call(d,f)});document.addEventListener(c.fullscreenerror,function(f){d.onerror.call(d,f)});if(a){module.exports=d}else{window.screenfull=d}})();(function(a){a.fn.toc=function(e){var j=this,b=[],k,i=false,f,g,c=a(window);e=e||"h1,h2,h3,h4";f=a(e);if(!f.length){return}f.each(function(){var n=a(this)[0],l={id:n.id,tag:n.nodeName,text:n.innerText,parent:i,items:[]},m;k=i.items||b;m=i;while(!!m){if(m.tag===l.tag){k=m.parent.items||b;l.parent=m.parent||false}m=m.parent||false}i=l;k.push(l)});function d(o,m){var n=0,l,p;for(;n<m.length;n++){l=a('<li id="toc-'+m[n].id+'"><a href="#'+m[n].id+'">'+m[n].text+"</a></li>");if(m[n].items.length>0){p=a("<ul />");l.append(p);d(p,m[n].items)}o.append(l)}}g=a('<ul class="toc-root" />');d(g,b);this.append(g);function h(){var q,l=0,s=f.length,m=a(f[0])||null,r;j.find("li.toc-active").removeClass("toc-active");j.find("li a.active").removeClass("active");j.find(".toc-sub-active").removeClass("toc-sub-active");for(;l<s;l++){q=a(f[l]);if(q.offset().top-c.scrollTop()-5>=0){break}m=q}r=a("#toc-"+m[0].id);r.addClass("toc-active");r.children("a").addClass("active");r.children("ul").addClass("toc-sub-active");r.parents("ul").addClass("toc-sub-active")}c.scroll(function(){h()});h()}}(jQuery));(function(){var at=document.querySelector("#canvas");var V=$(at);var n=$("#fin").on("hidden.bs.modal",function(av){K=false;B(0)});if(!at){return}var N=at.getContext("2d");var L=0;var P=Math.abs,E=Math.round,aq=Math.min;function m(aA,aG,ay){var aC,aE,ax,az=0,aw=0,aF=0,av,aB,aD;aA*=360;aC=(1-P(2*ay-1))*aG;aE=aC*(1-P((aA/60)%2-1));ax=ay-aC/2;if(aA<60){az=aC;aw=aE}else{if(aA<120){az=aE;aw=aC}else{if(aA<180){aw=aC;aF=aE}else{if(aA<240){aw=aE;aF=aC}else{if(aA<300){az=aE;aF=aC}else{if(aA<360){az=aC;aF=aE}}}}}}av=az+ax;aB=aw+ax;aD=aF+ax;return[av*255,aB*255,aD*255]}var k={id:"base",title:"",ctx:null,width:0,height:0,canRotate:false,isDynamic:false,rotateCW:function(){if(this.canRotate){L=(L+4+1)%4;this.draw()}},rotateCCW:function(){if(this.canRotate){L=(L+4-1)%4;this.draw()}},clear:function(ax){var aw=this.ctx,av=this.width,ay=this.height;ax=ax||"black";aw.fillStyle=ax;aw.beginPath();aw.rect(0,0,av,ay);aw.fill()}};function c(){this.id="color-bars";this.title="Цветопередача";this.canRotate=true;var av=["#FFFFFF","#FFFF00","#00FFFF","#00FF00","#FF00FF","#FF0000","#0000FF"];this.draw=function(){var ax=this.ctx,aw=this.width,az=this.height,aA=7,ay;this.clear("white");for(ay=0;ay<aA;ay++){ax.fillStyle=av[ay];ax.beginPath();switch(L){case 0:ax.rect(E(aw/aA*ay),0,E(aw/aA)+1,az);break;case 1:ax.rect(0,E(az/aA*ay),aw,E(az/aA)+1);break;case 2:ax.rect(E(aw*(1-(ay+1)/aA)),0,E(aw/aA)+1,az);break;case 3:ax.rect(0,E(az*(1-(ay+1)/aA)),aw,E(az/aA)+1);break}ax.fill()}}}c.prototype=k;function D(ax,aw,av){this.id=ax;this.title=aw;this.color=av;this.draw=function(){this.clear(this.color)}}D.prototype=k;function au(){this.id="spectrum";this.title="Спектр";this.canRotate=true;this.draw=function(){var aw=this.ctx,av=this.width,ax=this.height,ay;this.clear();switch(L){case 0:ay=aw.createLinearGradient(0,0,av,0);break;case 1:ay=aw.createLinearGradient(0,0,0,ax);break;case 2:ay=aw.createLinearGradient(av,0,0,0);break;case 3:ay=aw.createLinearGradient(0,ax,0,0);break}ay.addColorStop(0,"#FF0000");ay.addColorStop(1/5,"#FFFF00");ay.addColorStop(2/5,"#00FF00");ay.addColorStop(3/5,"#00FFFF");ay.addColorStop(4/5,"#0000FF");ay.addColorStop(5/5,"#FF00FF");aw.fillStyle=ay;aw.beginPath();aw.rect(0,0,av,ax);aw.fill()}}au.prototype=k;function af(){this.id="hsl-spectrum";this.title="Тональный спектр";this.canRotate=true;var av=[[0,1,0],[1,0,-1],[1,-1,0],[0,0,1]];this.draw=function(){var aI=this.ctx,ax=this.width,aG=this.height,az,aC,aD,aF,aE,aB=0,aH,ay,aw,aA;this.clear();az=aI.getImageData(0,0,ax,aG);aC=az.data;aH=av[L];ay=aH[0];for(aE=0;aE<aG;aE++){for(aF=0;aF<ax;aF++){aw=aF/ax;aA=aE/aG;aD=m(ay+aH[1]*aw+aH[2]*aA,1,ay+aH[2]*aw+aH[1]*aA);aC[aB]=aD[0];aC[aB+1]=aD[1];aC[aB+2]=aD[2];aB+=4}}aI.putImageData(az,0,0)}}af.prototype=k;function Z(ay,ax,aw,av){this.id=ay;this.title=ax;this.canRotate=true;this.color1=aw;this.color2=av;this.draw=function(){var aA=this.ctx,az=this.width,aB=this.height,aC;this.clear();switch(L){case 0:aC=aA.createLinearGradient(0,0,az,0);break;case 1:aC=aA.createLinearGradient(0,0,0,aB);break;case 2:aC=aA.createLinearGradient(az,0,0,0);break;case 3:aC=aA.createLinearGradient(0,aB,0,0);break}aC.addColorStop(0,this.color1);aC.addColorStop(1,this.color2);aA.fillStyle=aC;aA.beginPath();aA.rect(0,0,az,aB);aA.fill()}}Z.prototype=k;function ag(){this.id="flicker-dots-25";this.title="Мерцание 25%";this.draw=function(){var ax=this.ctx,az=this.width,aw=this.height,aC,aA,av,aB,ay;this.clear("white");aC=ax.getImageData(0,0,az,aw);aA=aC.data;for(aB=0;aB<aw;aB+=2){for(av=0;av<az;av+=2){ay=(aB*az+av)*4;aA[ay]=aA[ay+1]=aA[ay+2]=0}}ax.putImageData(aC,0,0)}}ag.prototype=k;function l(){this.id="flicker-dots-50";this.title="Мерцание 50%";this.draw=function(){var ax=this.ctx,az=this.width,aw=this.height,aC,aA,av,aB,ay;this.clear("white");aC=ax.getImageData(0,0,az,aw);aA=aC.data;for(aB=0;aB<aw;aB+=2){for(av=0;av<az;av+=2){ay=(aB*az+av)*4;aA[ay]=aA[ay+1]=aA[ay+2]=0;ay+=(az+1)*4;aA[ay]=aA[ay+1]=aA[ay+2]=0}}ax.putImageData(aC,0,0)}}l.prototype=k;function p(){this.id="flicker-dots-75";this.title="Мерцание 75%";this.draw=function(){var ax=this.ctx,az=this.width,aw=this.height,aC,aA,av,aB,ay;this.clear("black");aC=ax.getImageData(0,0,az,aw);aA=aC.data;for(aB=0;aB<aw;aB+=2){for(av=0;av<az;av+=2){ay=(aB*az+av)*4;aA[ay]=aA[ay+1]=aA[ay+2]=255}}ax.putImageData(aC,0,0)}}p.prototype=k;function v(){this.id="flicker-dots-double";this.title="Мерцание-1 (через 2 пикселя)";this.canRotate=true;this.draw=function(){var aE=this.ctx,av=this.width,aD=this.height,aw,ay,aC,aA,ax,aB,az;this.clear("white");aw=aE.getImageData(0,0,av,aD);ay=aw.data;aB=(L%2===0)?1:0.5;az=1.5-aB;for(aA=0;aA<aD;aA++){for(aC=0;aC<av;aC++){if(((aB*aC|0)+(az*aA|0))%2===0){ax=(aA*av+aC)*4;ay[ax]=ay[ax+1]=ay[ax+2]=0}}}aE.putImageData(aw,0,0)}}v.prototype=k;function j(){this.id="flicker-dots-double-2";this.title="Мерцание-2 (через 2 пикселя)";this.canRotate=true;this.draw=function(){var aE=this.ctx,av=this.width,aD=this.height,aw,ay,aC,aA,ax,aB,az;this.clear("#800080");aw=aE.getImageData(0,0,av,aD);ay=aw.data;aB=(L%2===0)?1:0.5;az=1.5-aB;for(aA=0;aA<aD;aA++){for(aC=0;aC<av;aC++){if(((aB*aC|0)+(az*aA|0))%2===0){ax=(aA*av+aC)*4;ay[ax]=ay[ax+2]=0;ay[ax+1]=128}}}aE.putImageData(aw,0,0)}}j.prototype=k;function H(){this.id="sharpness";this.title="Резкость";this.draw=function(){var aK=this.ctx,ax=this.width,aI=this.height,az,aD,aH,aG,aB,aF,aC,aA,ay,aJ,aE,aw=159,av;this.clear("white");az=aK.getImageData(0,0,ax,aI);aD=az.data;for(aG=0;aG<aI;aG++){for(aH=0;aH<ax;aH++){aB=(aG*ax+aH)*4;aF=(aH/48)|0;aC=(aG/48)|0;aA=aH%48;ay=aG%48;aJ=(aF%6+(aC*2)%6)%6;aE=0;switch(aJ){case 0:aE=(aA+ay)%2===0?aw:0;break;case 1:aE=(((aA/2)|0)+((ay/2)|0))%2===0?aw:0;break;case 2:aE=ay%2===0?aw:0;break;case 3:aE=(((ay+1)/2)|0)%2===0?aw:0;break;case 4:aE=aA%2===0?aw:0;break;case 5:aE=(((aA-1)/2)|0)%2===0?aw:0;break}aD[aB]=aD[aB+1]=aD[aB+2]=aE}}aK.putImageData(az,0,0);av=aq(ax,aI)/4;aK.fillStyle="#747474";aK.beginPath();aK.arc(ax/2,aI/2,av,0,2*Math.PI);aK.fill()}}H.prototype=k;function g(){this.id="sharpness-grid";this.title="Резкость-2";this.draw=function(){var ax=this.ctx,az=this.width,av=this.height,ay,aA,aw,aB;this.clear("#808080");ax.fillStyle="#808080";ax.strokeStyle="#202020";ax.lineWidth=1;ax.beginPath();ax.moveTo(0.5,E(av/2)+0.5);ax.lineTo(az-0.5,E(av/2)+0.5);ax.moveTo(E(az/2)+0.5,0.5);ax.lineTo(E(az/2)+0.5,av-0.5);ax.moveTo(0,0);ax.lineTo(az,av);ax.moveTo(0,av);ax.lineTo(az,0);ax.stroke();aA=(aq(az,av)/4)|0;ax.beginPath();ax.arc(az/2,av/2,aA,0,2*Math.PI);ax.fill();ax.stroke();ax.strokeStyle="#FFFFFF";ax.beginPath();ax.rect(0.5,0.5,az-1,av-1);ax.stroke();ax.beginPath();ax.rect(E(az*0.05)+0.5,E(av*0.05)+0.5,E(az*0.9),E(av*0.9));ax.rect(E(az*0.1)+0.5,E(av*0.1)+0.5,E(az*0.8),E(av*0.8));ax.stroke();ax.strokeStyle="#202020";for(ay=0;ay<5;ay++){aB=((ay+1)%2)*0.5;ax.lineWidth=ay+1;ax.beginPath();aw=(0.5+(ay-2)*0.05);ax.moveTo(E(0.385*az)+aB,E(aw*av)+aB);ax.lineTo(E(0.615*az)+aB,E(aw*av)+aB);ax.moveTo(E(aw*az)+aB,E(0.385*av)+aB);ax.lineTo(E(aw*az)+aB,E(0.615*av)+aB);ax.stroke()}}}g.prototype=k;function aa(){this.id="contrast-clipping";this.title="Контрастность";var av=["rgb(%,%,%)","rgb(%,16,16)","rgb(16,%,16)","rgb(16,16,%)"];this.draw=function(){var aI=this.ctx,aw=this.width,aG=this.height,aA,ay,aF,aE,aC,aB,az,aH,aD,ax;this.clear("#808080");aF=E(aq(aw,aG*2)/6);for(aB=0;aB<2;aB++){for(aC=0;aC<2;aC++){aH=av[aB*2+aC];aA=E(aw*(0.25+0.5*aC));ay=E(aG*(0.25+0.5*aB));for(az=0;az<6;az++){aE=aF*(1-az/5.5);for(ax in [0,1]){aD=(ax*2-1);aI.fillStyle=aH.replace(/%/g,239+((4+6*ax-aD*az)%5)*4);aI.beginPath();aI.rect(aA+aD*aF/2-aE/2,ay-aE/2,aE,aE);aI.fill()}}}}}}aa.prototype=k;function U(){this.id="contrast-gradients";this.title="Контрастность (градиенты)";var av=["rgb(%,%,%)","rgb(%,0,0)","rgb(0,%,0)","rgb(0,0,%)"];this.draw=function(){var aG=this.ctx,aw=this.width,aE=this.height,aA=E(aq(aw,aE)*0.9),aD=E(aA/32),aC=E(aA/4),ay,ax,aB,az,aF,aH;this.clear("#000000");aG.font=aD*0.6+"px monospace";aG.textAlign="center";aG.textBaseline="middle";for(az=0;az<4;az++){aF=av[az];for(aB=0;aB<32;aB++){ay=(aw-aA)/2+aD*aB;ax=(aE-aA)/2+aC*az;aG.fillStyle=aF.replace(/%/g,7+aB*8);aG.beginPath();aG.rect(ay,ax,aD+1,aC*0.8);aG.fill();aG.fillStyle="#808080";aH=(aB+1).toString();aG.fillText(aH,ay+aD/2,ax+aC*0.9)}}}}U.prototype=k;function aj(av){this.kind=(av||0)%2;this.id=(!!this.kind)?"white-level":"black-level";this.title=(!!this.kind)?"Уровень белого":"Уровень черного";this.draw=function(){var aM=this.ctx,aw=this.width,aK=this.height,aE=5,aD=4,aH=E(aq(aw,aK)/Math.max(aE,aD)*0.75),aF=aH/4,aG=aH+aF,aI=aE*aG-aF,aC=aD*aG-aF,az,ax,aB,aA,aL="rgb(%,%,%)",aJ,ay=this.kind;(!!ay)?this.clear("#ffffff"):this.clear("#000000");aM.font="12px monospace";aM.textAlign="left";aM.textBaseline="bottom";for(aA=0;aA<aD;aA++){for(aB=0;aB<aE;aB++){az=(aw-aI+aF)/2+aB*aG;ax=(aK-aC+aF)/2+aA*aG;aJ=255*ay+(1-ay*2)*(aA*aE+aB+1);aM.fillStyle=aL.replace(/%/g,aJ);aM.beginPath();aM.rect(az,ax,aH,aH);aM.fill();aM.fillStyle="#808080";aM.fillText(aJ,az,ax)}}}}aj.prototype=k;function X(){this.id="geometry-grid";this.title="Геометрия";this.draw=function(){var aG=this.ctx,av=this.width,aF=this.height,aw=16,aE=av/16,aA=aF/16,az,ay,aD,aC,ax,aB;this.clear();ax=aG.getImageData(0,0,av,aF);aB=ax.data;for(ay=0;ay<aw+1;ay++){aC=(ay===aw)?aF-1:E(ay*aA);for(aD=0;aD<av;aD++){az=(aC*av+aD)*4;aB[az]=aB[az+1]=aB[az+2]=255}aD=(ay===aw)?av-1:E(ay*aE);for(aC=0;aC<aF;aC++){az=(aC*av+aD)*4;aB[az]=aB[az+1]=aB[az+2]=255}}aG.putImageData(ax,0,0)}}X.prototype=k;function ab(){this.id="image-cropping";this.title="Отсечение";this.draw=function(){var aF=this.ctx,av=this.width,aE=this.height,aw=aq(E(aq(av*0.0375,aE*0.0375)/5)*5,30),aC=E(av*0.75/aw),aA=E(aE*0.75/aw),aD=E((av-aC*aw)/2),ay=E((aE-aA*aw)/2),ax,aB,az;this.clear("#404040");aF.strokeStyle="#ffffff";aF.fillStyle=aF.strokeStyle;aF.lineWidth=1;aF.font="12px monospace";for(ax=0;ax<aw;ax++){aF.beginPath();aF.rect(ax+0.5,ay+ax*aA+0.5,aD-ax,aA);aF.rect(aD+ax*aC+0.5,aw-ax-1+0.5,aC,ay-aw+ax+1);aB=aD+aC*aw;aF.rect(aB+0.5,ay+ax*aA+0.5,av-aB-aw+ax,aA);az=ay+aA*aw;aF.rect(aD+ax*aC+0.5,az+0.5,aC,aE-az-ax-1);aF.textAlign="center";aF.textBaseline="bottom";aF.fillText(aw-ax,aD+aC*(ax+0.5),ay);aF.textBaseline="top";aF.fillText(ax+1,aD+aC*(ax+0.5),aE-ay+3);aF.textBaseline="middle";aF.textAlign="right";aF.fillText(ax+1,aD-3,ay+aA*(ax+0.5));aF.textAlign="left";aF.fillText(aw-ax,av-aD+3,ay+aA*(ax+0.5));aF.stroke()}}}ab.prototype=k;function x(){this.id="geometry-16x9";this.title="Геометрия 16:9";this.draw=function(){var aD=this.ctx,av=this.width,aC=this.height,aA=E(Math.max(av/16,aC/9)),aB=E((av-aA*16)/2),az=E((aC-aA*9)/2),ax,aw,ay;this.clear();aD.strokeStyle="#999999";aD.fillStyle="#000000";aD.lineWidth=1;aD.font="12px monospace";aD.beginPath();aD.stroke();for(aw=0;aw<9;aw++){for(ax=0;ax<16;ax++){aD.beginPath();aD.rect(aB+ax*aA+0.5,az+aw*aA+0.5,aA+(ax===15?-1:0),aA+(aw===8?-1:0));aD.stroke()}}aD.strokeStyle="#ffffff";aD.lineWidth=2;for(aw=0;aw<2;aw++){for(ax=0;ax<2;ax++){aD.beginPath();aD.arc((av+(ax*2-1)*13*aA)/2,(aC+(aw*2-1)*6*aA)/2,aA,0,2*Math.PI);aD.fill();aD.stroke()}}aD.beginPath();aD.arc(av/2,aC/2,aA*3.5,0,2*Math.PI);aD.fill();aD.stroke();aB=E((av-9*aA)/2);az=E((aC-9*aA)/2);aD.lineWidth=1;aD.beginPath();aD.rect(aB+0.5,az+0.5,9*aA-1,9*aA-1);aD.stroke();aD.beginPath();aD.moveTo(aB,az);aD.lineTo(aB+9*aA,az+9*aA);aD.moveTo(aB,az+9*aA);aD.lineTo(aB+9*aA,az);aD.stroke();aD.beginPath();aD.rect(E((av-4.5*aA)/2)+0.5,E((aC-4.5*aA)/2)+0.5,E(4.5*aA),E(4.5*aA));aD.rect(E((av-1.5*aA)/2)+0.5,E((aC-1.5*aA)/2)+0.5,E(1.5*aA),E(1.5*aA));aD.stroke()}}x.prototype=k;function M(){this.id="luma-zone-plate";this.title="Зонная пластинка яркости";this.draw=function(){var aI=this.ctx,av=this.width,aH=this.height,aA=av/2,ay=aH/2,aE,aC,aB,aG,aF,az,ax,aD,aw;this.clear("white");ax=aI.getImageData(0,0,av,aH);aD=ax.data;az=2/aq(av,aH);for(aF=0;aF<aH;aF++){for(aG=0;aG<av;aG++){aC=(aF*av+aG)*4;aw=(aG-aA)*(aG-aA)+(aF-ay)*(aF-ay);aE=(1+Math.cos(az*aw))/2;aD[aC]=aD[aC+1]=aD[aC+2]=aE*255}}aI.putImageData(ax,0,0)}}M.prototype=k;function S(){this.id="dynamic-box";this.title="Динамический квадрат";this.isDynamic=true;this.delay=5;this.draw=function(){var ay=this.ctx,aA=this.width,aw=this.height,av=aA/2,aB=aw/2,ax=50,az=50;this.x=av;this.y=aB;this.setVels()};this.x=0;this.y=0;this.vx=0;this.vy=0;this.size=50;this.setVels=function(){var aw=5,av=0.1;this.vx=2*(0.5-Math.random())*aw;this.vy=2*(0.5-Math.random())*aw;if(Math.abs(this.vx)<av||Math.abs(this.vy)<av){this.setVels()}};this.checkBounds=function(av,ax){var aw=this.size/2;return av-aw>=0&&ax-aw>=0&&av+aw<this.width&&ax+aw<this.height};this.canMove=function(av,aw){return this.checkBounds(av+this.vx,aw+this.vy)};this.move=function(){while(!this.canMove(this.x,this.y)){this.setVels()}this.x=this.x+this.vx,this.y=this.y+this.vy};this.redraw=function(){var aC=this;var ax=aC.ctx,aA=aC.width,aw=aC.height,av=aA/2,aB=aw/2,az=aC.size,ay=aC.size/2;aC.clear("black");aC.move();ax.fillStyle="#fff";ax.beginPath();ax.rect(aC.x-ay,aC.y-ay,az,az);ax.fill()}}S.prototype=k;function O(){this.id="dynamic-line";this.title="Динамическая линия";this.isDynamic=true;this.delay=10;this.draw=function(){var aw=this.ctx,ax=this.width,av=this.height;this.k=0;this.x1=0;this.y1=0;this.x2=ax;this.y2=0};this.k=0;this.x1=0;this.y1=0;this.x2=0;this.y2=0;this.d=10;this.move=function(){(this.k===0)?((this.y2>=this.height)?this.nextK():this.y2+=this.d):0;(this.k===1)?((this.x1>=this.width)?this.nextK():this.x1+=this.d):0;(this.k===2)?((this.x2<=0)?this.nextK():this.x1-=this.d,this.x2-=this.d):0;(this.k===3)?((this.x2>=this.width)?this.nextK():this.x1+=this.d,this.x2+=this.d):0;(this.k===4)?((this.x2<=0)?this.nextK():this.x2-=this.d):0;(this.k===5)?((this.y1>=this.height)?this.nextK():this.y1+=this.d):0;(this.k===6)?((this.y2<=0)?this.nextK():this.y1-=this.d,this.y2-=this.d):0;(this.k===7)?((this.y2>=this.height)?this.nextK():this.y1+=this.d,this.y2+=this.d):0;(this.k===8)?((this.y2<=0)?this.nextK():this.y2-=this.d):0;(this.k===9)?((this.x1<=0)?this.nextK():this.x1-=this.d):0;(this.k===10)?((this.x2>=this.width)?this.nextK():this.x1+=this.d,this.x2+=this.d):0;(this.k===11)?((this.x2<=0)?this.nextK():this.x1-=this.d,this.x2-=this.d):0;(this.k===12)?((this.x2>=this.width)?this.nextK():this.x2+=this.d):0;(this.k===13)?((this.y1<=0)?this.nextK():this.y1-=this.d):0;(this.k===14)?((this.y2>=this.height)?this.nextK():this.y1+=this.d,this.y2+=this.d):0;(this.k===15)?((this.y2<=0)?this.nextK():this.y1-=this.d,this.y2-=this.d):0};this.nextK=function(){this.k=(this.k+1)%16;this.x1=Math.max(0,Math.min(this.width-1,this.x1));this.y1=Math.max(0,Math.min(this.height-1,this.y1));this.x2=Math.max(0,Math.min(this.width-1,this.x2));this.y2=Math.max(0,Math.min(this.height-1,this.y2));this.d=1+Math.random()*4};this.redraw=function(){var aw=this.ctx,ax=this.width,av=this.height;this.clear("black");this.move();aw.strokeStyle="#fff";aw.lineWidth=1;aw.beginPath();aw.moveTo(this.x1+0.5,this.y1+0.5);aw.lineTo(this.x2+0.5,this.y2+0.5);aw.stroke()}}O.prototype=k;function ae(){this.id="dynamic-bars";this.title="Динамические полосы";this.isDynamic=true;this.delay=5;this.n=5;this.draw=function(){var ax=this.ctx,ay=this.width,aw=this.height,av=ay/2;this.x=av;this.setVels()};this.x=0;this.vx=0;this.size=50;this.setVels=function(){var aw=5,av=0.1;this.vx=2*(0.5-Math.random())*aw;if(Math.abs(this.vx)<av){this.setVels()}};this.checkBounds=function(av){var aw=this.size/2;return av-aw>=0&&av+aw<this.width};this.canMove=function(av){return this.checkBounds(av+this.vx)};this.move=function(){while(!this.canMove(this.x)){this.setVels()}this.x=this.x+this.vx};this.redraw=function(){var aC=this;var ax=aC.ctx,az=aC.width,aw=aC.height,aB=this.n,aA=az/aB/2;aC.clear("black");aC.move();ax.fillStyle="#fff";for(var ay=-1;ay<aB;ay++){var av=aC.x%(2*aA);ax.beginPath();ax.rect(av+ay*2*aA,0,aA,aw);ax.fill()}}}ae.prototype=k;function I(){this.id="dynamic-video";this.title="Видео";this.isDynamic=true;this.delay=5;this.video=document.getElementById("video");this.videoWidth=1280;this.videoHeight=720;this.draw=function(){var aw=this.ctx,ay=this.width,av=this.height;var ax=Math.min(ay/this.videoWidth,av/this.videoHeight);this.w=this.videoWidth*ax;this.h=this.videoHeight*ax;this.x=(ay-this.w)/2;this.y=(av-this.h)/2;aw.fillStyle="#000";this.clear("#000");this.video.play()};this.x=0;this.y=0;this.w=0;this.h=0;this.redraw=function(){var av=this.ctx;var aw=this.video;if(aw.paused||aw.ended){return}av.drawImage(aw,this.x,this.y,this.w,this.h)};this.doOnStop=function(){this.video.pause()}}I.prototype=k;function G(){this.x=0;this.y=0;this.vx=1;this.vy=1;this.vbasis=3;this.vmin=0.1;this.width=100;this.height=100;this.setVels=function(){this.vx=2*(0.5-Math.random())*this.vbasis;this.vy=2*(0.5-Math.random())*this.vbasis;if(Math.abs(this.vx)<this.vmin||Math.abs(this.vy)<this.vmin){this.setVels()}};this.checkBounds=function(av,aw){return av>=0&&aw>=0&&av<this.width&&aw<this.height};this.canMove=function(av,aw){return this.checkBounds(av+this.vx,aw+this.vy)};this.move=function(){while(!this.canMove(this.x,this.y)){this.setVels()}this.x+=this.vx;this.y+=this.vy}}function J(){this.id="dynamic-points";this.title="Динамические точки";this.isDynamic=true;this.delay=5;this.count=50;this.points=[];this.maxDist=100;this.maxTone=3600;this.tone=0;this.newPoint=function(){var av=new G();av.x=this.width*Math.random();av.y=this.height*Math.random();av.width=this.width;av.height=this.height;av.setVels();return av};this.draw=function(){this.points=[];for(var av=0;av<this.count;av++){var aw=this.newPoint();this.points.push(aw)}this.maxDist=Math.sqrt(this.width*this.width+this.height*this.height)};this.redraw=function(){var aJ=this.ctx,aw=this.width,aH=this.height;this.tone=(this.tone+1)%this.maxTone;var aB=this.tone/this.maxTone;var aD=m(aB,0.5,0.25);this.clear("rgba("+Math.round(aD[0])+","+Math.round(aD[1])+","+Math.round(aD[2])+",1)");aJ.fillStyle="rgba(255,255,255,0.75)";aJ.strokeStyle="#999";var ay=0.15;var ax=this.points.length;for(var aA=0;aA<ax-1;aA++){var aG=this.points[aA];for(var az=aA+1;az<ax;az++){var aF=this.points[az];var aK=aG.x-aF.x;var aI=aG.y-aF.y;var aC=Math.sqrt(aK*aK+aI*aI);var aE=(1-Math.min(aC/(ay*this.maxDist),1))*0.75;aJ.strokeStyle="rgba(255,255,255,"+aE+")";if(aC<ay*this.maxDist){aJ.beginPath();aJ.moveTo(aG.x,aG.y);aJ.lineTo(aF.x,aF.y);aJ.stroke()}}}for(var aA in this.points){var av=this.points[aA];av.move();aJ.beginPath();aJ.arc(av.x,av.y,2,0,2*Math.PI);aJ.fill()}}}J.prototype=k;var a=[{id:"color",title:"Цветопередача",items:[new c(),new D("red-color","Красный экран","#FF0000"),new D("green-color","Зеленый экран","#00FF00"),new D("blue-color","Синий экран","#0000FF"),new D("yellow-color","Желтый экран","#FFFF00"),new D("magenta-color","Пурпурный экран","#FF00FF"),new D("cyan-color","Голубой экран","#00FFFF"),new D("white-color","Белый экран","#FFFFFF"),new D("black-color","Черный экран","#000000"),]},{id:"gradients",title:"Градиенты",items:[new au(),new af(),new Z("red-yellow-gradient","Красно-желтый градиент","#FF0000","#FFFF00"),new Z("yellow-green-gradient","Желто-зеленый градиент","#FFFF00","#00FF00"),new Z("green-cyan-gradient","Зелено-голубой градиент","#00FF00","#00FFFF"),new Z("cyan-blue-gradient","Голубо-синий градиент","#00FFFF","#0000FF"),new Z("blue-magenta-gradient","Сине-пурпурный градиент","#0000FF","#FF00FF"),new Z("magenta-red-gradient","Пурпурно-красный градиент","#FF00FF","#FF0000")]},{id:"flicker",title:"Мерцание",items:[new ag(),new l(),new p(),new v(),new j()]},{id:"sharpness",title:"Резкость",items:[new H(),new g()]},{id:"contrast",title:"Контрастность и яркость",items:[new aa(),new U(),new aj(0),new aj(1),new M()]},{id:"grids",title:"Геометрия и сетки",items:[new X(),new ab(),new x()]},{id:"dynamics",title:"Динамічні тести",items:[new S(),new O(),new ae(),new I(),]}];var F=new J();var T=a[0];var r=T.items[0];var A=false;var h=false;var e=function(){if(A){setTimeout(e,100)}else{q()}};var ac=function(){h=true;e()};var q=function(){h=false;var aw=window.innerWidth,av=window.innerHeight;N.canvas.width=aw;N.canvas.height=av;r.ctx=N;r.width=aw;r.height=av;r.draw();if(r.isDynamic){u(r)}};var u=function(av){A=true;if(h){A=false;if(av.doOnStop){av.doOnStop()}return}av.redraw();setTimeout(u,av.delay||5,av)};var an=$("#controls,#nav-controls,#tad-box");var W=$("#screen-groups");var ak=true;var K=false;var R=false;var b=$("#tad-box");var z=true;var o=false;var i=function(){V.css({cursor:"none"});$("body, #nav-controls a").css({cursor:"none"});o=true};var y=function(){V.css({cursor:"default"});$("#nav-controls a").css({cursor:"pointer"});$("body").css({cursor:"default"});o=false};var ah=0;var ai=function(){if(W.hasClass("open")){ah=0}ah++;if(ah>=2){an.fadeOut({complete:function(){i()}})}setTimeout(ai,1000)};var ar=-1;var al=function(aw){var av=0;if(ar===aw){return}ar=aw;if(!ak){if($("#controls:hover, #nav-controls a span:hover").length>0){av=1}else{av=aw/an.offset().top}av=(av>1)?1:av;an.css({opacity:av}).show()}else{an.hide()}o&&y()};ai();$(window).mousemove(function(av){if(d){d=false;screenfull.request()}ah=0;al(av.clientY)});var f=function(){W.hasClass("open")&&$("#sg-list").dropdown("toggle")};var B=function(ax){var az=a.length,av=$("#indicators-list"),aw,ay;ax=(ax+az)%az;T=a[ax];r=T.items[0];$("#sg-caption").html(a[ax].title);av.html("");for(aw=0;aw<a[ax].items.length;aw++){ay=$('<li data-index="'+aw+'" '+((aw===0)?'class="active"':"")+"></li>");av.append(ay);ay.click(s)}$("#sg-list li.active").removeClass("active");$('#sg-list li[data-index="'+ax+'"]').addClass("active");f();Q(0)};var Q=function(av){var aw=T.items.length;f();av=(av+aw)%aw;$("#indicators-list li.active").removeClass("active");$("#indicators-list li[data-index="+av+"]").addClass("active");r=T.items[av];$("#xs-buttons button").toggleClass("disabled",!r.canRotate);ac()};var ap=function(){var aw=a.indexOf(T),av=T.items.indexOf(r)+1;if(aw>=a.length-1&&av>=T.items.length){K=true;n.modal({show:true});r=new J();ac()}else{(av>=T.items.length)?B(++aw):Q(av)}};var am=function(){var aw=a.indexOf(T),av=T.items.indexOf(r)-1;if(av<0){B(--aw);av=T.items.length-1}Q(av)};$("#nav-controls a.left").click(function(){am();$(this).blur();return false});$("#nav-controls a.right").click(function(){ap();$(this).blur();return false});$("#close-ad").click(function(){b.hide();z=true;an=$("#controls,#nav-controls")});V.on("swipeleft",ap).on("swiperight",am);V.click(function(av){(av.clientX<window.innerWidth/2)?am():ap()});$(window).keydown(function(av){if(!ak&&!K){switch(av.keyCode){case 27:C();break;case 37:am();break;case 32:case 39:ap();break;case 38:r.rotateCW();break;case 40:r.rotateCCW();break;case 13:if(av.altKey){screenfull.toggle()}else{ap()}break}}else{if(av.keyCode===13&&!av.altKey&&!av.shiftKey&&!av.ctrlKey){w()}}});var s=function(av){Q($(this).data("index")||0)};var ao=function(av){B($(this).parent().data("index")||0);$(this).blur();return false};var Y=function(){var av,ax,ay,aw=0;av=$("#sg-list");for(;aw<a.length;aw++){ax=$('<a href="#">'+a[aw].title+"</a>");ay=$('<li data-index="'+aw+'"></li>');ay.append(ax);av.append(ay);ax.click(ao)}B(0)};var t=function(){$("ins.adsbygoogle-noablate").addClass("mtn-hidden").hide()};var ad=function(){$(".mtn-hidden").removeClass("mtn-hidden").show()};var w=function(){t();setTimeout(t,5000);setTimeout(t,10000);ak=false;ah=0;an=$("#controls,#nav-controls,#tad-box");if(screenfull.enabled){screenfull.request();$("#front, #page-header, #page-footer").hide();B(0);V.show();an.css({opacity:1}).fadeIn()}$("html").addClass("testing");b.show();z=false};$("#start").click(w);var C=function(){ak=true;$("html").removeClass("testing");screenfull.exit();V.hide();an.hide();z=true;$("#board").show();$("#front, #page-header, #page-footer").show();h=true;if(r.doOnStop){r.doOnStop()}ad()};$("#home").click(C);$("#rotate-cw").click(function(){r.rotateCW()});$("#rotate-ccw").click(function(){r.rotateCCW()});$(".btn").click(function(){$(this).blur()});if(screenfull.enabled){document.addEventListener(screenfull.raw.fullscreenchange,function(){$("body").toggleClass("fullscreen",screenfull.isFullscreen)});$("#fsToggle").click(function(){screenfull.toggle()})}$(window).resize(ac);$(window).bind("mousewheel",function(av){if(!ak&&!K){if(av.originalEvent.wheelDelta>0){am()}else{ap()}}});Y();$("#fin-close").click(function(){C()});$("#fin-restart").click(function(){n.modal("hide");B(0)});var d=false;if(window.location.hash==="#start"){d=true;history.replaceState("",document.title,window.location.pathname);w()}})();(function(){$("#toc").toc(".main h2,h3,h4");$("#social, #fin-social").show()})();